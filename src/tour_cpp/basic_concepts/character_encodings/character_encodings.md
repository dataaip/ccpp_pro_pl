## 字符集与编码- C++语言基础概念

本页描述C++标准定义的多个字符集。

```text
翻译字符集- 翻译字符集包含以下元素：
1. 每个被分配了Unicode码点的抽象字符
2. 每个未被分配抽象字符的Unicode标量值对应的独特字符
翻译字符集是基本字符集和基本字面字符集的超集（自C++23起）

基本字符集- 基本字符集包含以下96个字符（C++26前）/99个字符（C++26起）：
代码点        字符名称                字形
U+0009        字符制表符    
U+000B        行制表符    
U+000C        换页符(FF)    
U+0020        空格    
U+000A        换行符(LF)    新行
U+0021        感叹号                !
U+0022        引号                  "
U+0023        数字符号              #
U+0025        百分号                %
U+0026        和号                  &
U+0027        撇号                  '
U+0028        左圆括号              (
U+0029        右圆括号              )
U+002A        星号                  *
U+002B        加号                  +
U+002C        逗号                  ,
U+002D        连字符                -
U+002E        句号                  .
U+002F        斜线                  /
U+0030..U+0039 数字零到九           0 1 2 3 4 5 6 7 8 9
U+003A        冒号                  :
U+003B        分号                  ;
U+003C        小于号                <
U+003D        等号                  =
U+003E        大于号                >
U+003F        问号                  ?
U+0041..U+005A 拉丁大写字母A到Z     A B C D E F G H I J K L M N O P Q R S T U V W X Y Z
U+005B        左方括号              [
U+005C        反斜线                \
U+005D        右方括号              ]
U+005E        抑扬符                ^
U+005F        下划线                _
U+0061..U+007A 拉丁小写字母a到z     a b c d e f g h i j k l m n o p q r s t u v w x y z
U+007B        左花括号              {
U+007C        竖线                  |
U+007D        右花括号              }
U+007E        波浪号                ~
自C++26起，基本字符集新增以下字符：
代码点        字符名称        字形
U+0024        美元符号        $
U+0040        商用at符号      @
U+0060        重音符号        `

基本字面字符集- 基本字面字符集包含基本字符集的所有字符，以及以下控制字符：
代码点        字符
U+0000        空字符
U+0007        响铃
U+0008        退格
U+000D        回车(CR)

执行字符集
执行字符集和执行宽字符集是基本字面字符集的超集。执行字符集的编码和附加元素集合（如有）与本地环境相关。执行宽字符集的每个元素必须可表示为独特的wchar_t代码单元。

代码单元与字面编码
代码单元是字符类型的整数值。除多字符或不可编码字符外的字符字面量，或字符串字面量中的字符，按编码前缀确定为一个或多个代码单元序列，称为相应的字面编码。

字面编码或执行字符集的本地环境特定编码将基本字面字符集的每个元素编码为具有非负值的单个代码单元，且与其他元素的代码单元值不同。不在基本字面字符集中的字符可以用多个代码单元编码；此类代码单元的值可能与基本字面字符集元素的代码单元值相同。执行字符集的编码可能与任何字面编码无关。

普通字面编码应用于普通字符或字符串字面量。宽字面编码应用于宽字符或字符串字面量。

U+0000空字符编码为值0。翻译字符集的其他元素不以值为0的代码单元编码。数字0(U+0030)之后的每个十进制数字字符的代码单元值应比前一个数字大1。普通和宽字面编码的其他方面由实现定义。

对于UTF-8、UTF-16或UTF-32字面量，翻译字符集每个字符对应的UCS标量值按ISO/IEC 10646对相应UCS编码形式的规定进行编码。

注意
C++23通过P2314R4更改了某些字符集的标准名称：
新名称                旧名称
基本字符集            基本源字符集
基本字面字符集        基本执行字符集、基本执行宽字符集

在翻译阶段1中，从源文件字符（UTF-8源文件除外，自C++23起）到基本字符集（C++23前）/翻译字符集（C++23起）的映射由实现定义，因此要求实现文档说明基本源字符在源文件中的表示方式。

缺陷报告
以下行为变更缺陷报告被追溯应用于先前发布的C++标准：
DR     应用于     发布时的行为                 纠正后的行为
CWG 788 C++98     执行字符集的成员值由实现定义，但不与本地环境相关  改为与本地环境相关
CWG 1796 C++98    基本执行（宽）字符集中的空（宽）字符表示所有位为零  仅要求值为零
```

---